<!DOCTYPE html>
<html>
<head>
  <title>My first Vue app</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vuex"></script>
</head>
<body>
<!-- ========== HTML ======================================================= -->
<!-- モジュール 　フラクタル構造-->
<!-- ========== HTML ======================================================= -->
<!-- =========== JS ======================================================== -->
  <script>
    // const moduleA = {
    //   state: { ... },
    //   mutations: { ... },
    //   actions: { ... },
    //   getters: { ... }
    // }

    // const moduleB = {
    //   state: { ... },
    //   mutations: { ... },
    //   actions: { ... }
    // }

    // const store = new Vuex.Store({
    //   modules: {
    //     a: moduleA,
    //     b: moduleB
    //   }
    // })

    // store.state.a // -> `moduleA` のステート
    // store.state.b // -> `moduleB` のステート

    const moduleA = {
      state: { count: 0 },
      mutations: {
        increment (state) {
          // `state` はモジュールのローカルステート
          state.count++
        }
      },

      getters: {
        doubleCount (state) {
          return state.count * 2
        }
      }
    }

    // const moduleA = {
    //   // ...
    //   actions: {
    //     incrementIfOddOnRootSum ({ state, commit, rootState }) {
    //       if ((state.count + rootState.count) % 2 === 1) {
    //         commit('increment')
    //       }
    //     }
    //   }
    // }

    // const moduleA = {
    //   // ...
    //   getters: {
    //     sumWithRootCount (state, getters, rootState) {
    //       return state.count + rootState.count
    //     }
    //   }
    // }
    // namespaced:
//     const store = new Vuex.Store({
//   modules: {
//     account: {
//       namespaced: true,

//       // モジュールのアセット
//       state: { ... }, // モジュールステートはすでにネストされており、名前空間のオプションによって影響を受けません
//       getters: {
//         isAdmin () { ... } // -> getters['account/isAdmin']
//       },
//       actions: {
//         login () { ... } // -> dispatch('account/login')
//       },
//       mutations: {
//         login () { ... } // -> commit('account/login')
//       },

//       // ネストされたモジュール
//       modules: {
//         // 親モジュールから名前空間を継承する
//         myPage: {
//           state: { ... },
//           getters: {
//             profile () { ... } // -> getters['account/profile']
//           }
//         },
//            // さらに名前空間をネストする
//           posts: {
//           namespaced: true,

//           state: { ... },
//           getters: {
//             popular () { ... } // -> getters['account/posts/popular']
//           }
//         }
//       }
//     }
//   }
// })

// グローバル
// modules: {
//   foo: {
//     namespaced: true,

//     getters: {
//       // `getters` はこのモジュールのゲッターにローカライズされています
//       // ゲッターの第4引数経由で rootGetters を使うことができます
//       someGetter (state, getters, rootState, rootGetters) {
//         getters.someOtherGetter // -> 'foo/someOtherGetter'
//         rootGetters.someOtherGetter // -> 'someOtherGetter'
//       },
//       someOtherGetter: state => { ... }
//     },

//     actions: {
//       // ディスパッチとコミットもこのモジュール用にローカライズされています
//       // ルートディスパッチ/コミットの `root` オプションを受け入れます
//       someAction ({ dispatch, commit, getters, rootGetters }) {
//         getters.someGetter // -> 'foo/someGetter'
//         rootGetters.someGetter // -> 'someGetter'

//         dispatch('someOtherAction') // -> 'foo/someOtherAction'
//         dispatch('someOtherAction', null, { root: true }) // -> 'someOtherAction'

//         commit('someMutation') // -> 'foo/someMutation'
//         commit('someMutation', null, { root: true }) // -> 'someMutation'
//       },
//       someOtherAction (ctx, payload) { ... }
//     }
//   }
// }
// 登録
// {
//   actions: {
//     someOtherAction ({dispatch}) {
//       dispatch('someAction')
//     }
//   },
//   modules: {
//     foo: {
//       namespaced: true,
//        actions: {
//         someAction: {
//           root: true,
//           handler (namespacedContext, payload) { ... } // -> 'someAction'
//         }
//       }
//     }
//   }
// }
// computed: {
//   ...mapState({
//     a: state => state.some.nested.module.a,
//     b: state => state.some.nested.module.b
//   })
// },
// methods: {
//   ...mapActions([
//     'some/nested/module/foo', // -> this['some/nested/module/foo']()
//     'some/nested/module/bar' // -> this['some/nested/module/bar']()
//   ])
// }

// コンポーネントにバインディング
// ↓
// computed: {
//   ...mapState('some/nested/module', {
//     a: state => state.a,
//     b: state => state.b
//   })
// },
// methods: {
//   ...mapActions('some/nested/module', [
//     'foo', // -> this.foo()
//     'bar' // -> this.bar()
//   ])
// }
// ↓
// import { createNamespacedHelpers } from 'vuex'

// const { mapState, mapActions } = createNamespacedHelpers('some/nested/module')

// export default {
//   computed: {
//     // `some/nested/module` を調べます
//     ...mapState({
//       a: state => state.a,
//       b: state => state.b
//     })
//   },
//   methods: {
//     // `some/nested/module` を調べます
//     ...mapActions([
//       'foo',
//       'bar'
//     ])
//   }
// }
// モジュール登録
// `myModule` モジュールを登録します
// store.registerModule('myModule', {
//   // ...
// })

// // ネストされた `nested/myModule` モジュールを登録します
// store.registerModule(['nested', 'myModule'], {
//   // ...
// })
// モジュールを再利用する際は環境汚染を防ぐために　関数で状態を宣言する
// const MyReusableModule = {
//   state () {
//     return {
//       foo: 'bar'
//     }
//   },
//   // ミューテーション、アクション、ゲッター...
// }
  </script>
<!-- =========== JS ======================================================== -->
</body>
</html>